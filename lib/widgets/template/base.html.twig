<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'template/head.html.twig' %}
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    {% include 'template/navbar.html.twig' %}
    <!-- Main Container -->
    <div class="flex pt-16 justify-center">
        <div class="flex w-full max-w-[1600px]">
        
            <!-- Left Sidebar - Navigation Menu -->
            <aside id="leftSidebar" class="fixed bg-white dark:bg-gray-900 dark:lg:bg-transparent lg:bg-transparent lg:sticky top-16 left-0 h-[calc(100vh-4rem)] w-64 border-r border-gray-200 dark:border-gray-700 overflow-y-auto transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40 flex-shrink-0">
                <div class="p-4">
                    <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4">Documentation</h3>
                    
                    <!-- Getting Started -->
                    <div class="mb-6">
                        <ul class="space-y-1">
                            {% for menu in menus %}
                                <li>
                                    <a href="/{{ menu.key }}" class="{{ $e.isKey(menu.key) ? 'menu-item-active text-blue-600 dark:text-blue-400' : '' }} flex items-center gap-2 px-3 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                        {% if menu.meta.icon %}
                                        <span class="menu-item-icon flex-shrink-0 leading-none">
                                            <i class="{{ menu.meta.icon }}"></i>
                                        </span>
                                        {% endif %}
                                        <span class="menu-item-text text-sm flex-1 leading-relaxed">{{ menu.title }}</span>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
            </aside>

            <!-- Overlay for mobile -->
            <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"></div>

            <!-- Main Content Area -->
            <main class="flex-1 min-w-0 overflow-x-hidden order-2 xl:order-1 xl:mx-20 lg:mx-16 md:mx-8 sm:mx-4">
                <div class="flex flex-col xl:flex-row w-full relative">
                
                    <!-- Content -->
                    <div class="flex-1 w-full py-8 px-8">
                        {% if $e.isKey('')  %}
                            {% include 'template/hero.html.twig' %}
                        {% endif %}
                        
                        <!-- Breadcrumb -->
                        <nav class="flex items-center justify-between mb-6 text-sm overflow-x-auto">
                            <ol class="flex items-center space-x-2 flex-nowrap">
                                <li class="whitespace-nowrap"><a href="/" class="text-blue-600 dark:text-blue-400 hover:underline">Home</a></li>
                                <li class="whitespace-nowrap"><i class="ph-duotone ph-caret-right text-base text-gray-400"></i></li>
                                <li class="text-gray-600 dark:text-gray-400 whitespace-nowrap">{{ title }}</li>
                            </ol>
                            <a href="{{ github }}/edit/master/doc/{{ filename }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap ml-4">
                                <i class="ph-duotone ph-pencil-simple text-lg text-blue-600 dark:text-blue-400"></i>
                                <span class="text-xs hidden sm:inline">Edit</span>
                            </a>
                        </nav>

                        <!-- Mobile TOC -->
                        <div class="xl:hidden mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">On This Page</h3>
                            <nav>
                                <ul class="flex flex-wrap gap-2">
                                    {% for section in index %}
                                        <li><a href="#{{ section.id }}" class="inline-block px-3 py-1 text-xs rounded-lg bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 border border-gray-200 dark:border-gray-600">{{ section.title | html }}</a></li>
                                    {% endfor %}
                                </ul>
                            </nav>
                        </div>

                        <!-- Document Content -->
                        <article class="prose prose-sm sm:prose-base lg:prose-lg dark:prose-invert max-w-none overflow-x-auto">
                            {{ content }}
                        </article>

                        <!-- Navigation Buttons -->
                        <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4 mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
                            {% if previous is defined %}
                                <a href="/{{ previous.key }}" class="flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <i class="ph-duotone ph-arrow-left flex-shrink-0 text-xl text-purple-600 dark:text-purple-400"></i>
                                    <div class="text-left min-w-0">
                                        <div class="text-xs text-gray-500">Previous</div>
                                        <div class="font-semibold truncate">{{ previous.title }}</div>
                                        <div class="text-xs opacity-80">{{  $l.maxLength(previous.description, 50) }}</div>
                                    </div>
                                </a>
                            {% endif %}
                            {% if next is defined %}
                                <a href="/{{ next.key }}" class="flex items-center gap-2 justify-end px-4 py-2 rounded-lg bg-blue-400 text-white hover:bg-blue-500 {{ previous is not defined ? 'ml-auto' : '' }}">
                                    <div class="text-right min-w-0">
                                        <div class="text-xs opacity-80">Next</div>
                                        <div class="font-semibold truncate">
                                            {{ next.title }}
                                        </div>
                                        <div class="text-xs opacity-80">{{  $l.maxLength(next.description, 50) }}</div>
                                    </div>
                                    <i class="ph-duotone ph-arrow-right flex-shrink-0 text-xl text-white"></i>
                                </a>
                            {% endif %}
                        </div>

                        {% include 'template/footer.html.twig' %}
                    </div>

                    
                </div>
            </main>

            <!-- Right Sidebar - Table of Contents -->
            <aside class="sticky top-0 xl:top-16 xl:h-[calc(100vh-4rem)] xl:w-64 w-full overflow-y-auto px-4 py-6 xl:py-8 border-b xl:border-b-0 xl:border-l border-gray-200 dark:border-gray-700 order-1 xl:order-2 bg-white dark:bg-gray-900 hidden xl:block">
                <div class="xl:sticky xl:top-0">
                    <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4">On This Page</h3>
                    <nav id="tableOfContents">
                        <ul class="space-y-2">
                            {% for section in index %}
                                <li class="block"><a href="#{{ section.id }}" class="block px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 border-l-2 border-transparent hover:border-blue-600 pl-3 md-level-{{ section.level }}">{{ section.title | html }}</a></li>
                            {% endfor %}
                        </ul>
                    </nav>
                    
                    <!-- Action Buttons -->
                    <div class="mt-6 space-y-1 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <a href="{{ github }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-github-logo text-lg"></i>
                            <span class="text-xs">Star on GitHub</span>
                        </a>
                        <a href="{{ github }}/issues" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-warning-circle text-lg"></i>
                            <span class="text-xs">Create Issues</span>
                        </a>
                        <a href="{{ github }}/edit/master/doc/{{ filename }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-pencil-simple text-lg"></i>
                            <span class="text-xs">Edit this page</span>
                        </a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    <!-- Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <!-- Prism.js Toolbar Plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <!-- Prism.js Copy to Clipboard Plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <!-- Prism.js Dart Language Support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-dart.min.js"></script>
    <!-- Prism.js Additional Languages (optional) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-docker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-nginx.min.js"></script>
    <script src="/script.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="{{ language.code }}" dir="{{ language.dir }}">
<head>
    {% include 'template/head.html.twig' %}
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    {% include 'template/navbar.html.twig' %}
    <!-- Main Container -->
    <div class="flex pt-16 justify-center">
        <div class="flex w-full max-w-[1600px]">
        
            <!-- Left Sidebar - Navigation Menu -->
            <aside id="leftSidebar" data-dir="{{ language.isRtl ? 'translate-x-full' : '-translate-x-full' }}" class="fixed bg-white dark:bg-gray-900 lg:bg-transparent dark:lg:bg-transparent lg:sticky top-16 start-0 h-[calc(100vh-4rem)] w-76 border-e border-gray-200 dark:border-gray-700 overflow-y-auto [scrollbar-width:thin] [scrollbar-color:transparent_transparent] hover:[scrollbar-color:var(--color-gray-300)_transparent] dark:hover:[scrollbar-color:var(--color-gray-600)_transparent] transform {{ language.isRtl ? 'translate-x-full' : '-translate-x-full' }} lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 shrink-0">
                {% include 'template/sidebar.html.twig' %}
            </aside>

            <!-- Overlay for mobile -->
            <div id="overlay" class="hidden fixed inset-0 bg-black/50 z-30 lg:hidden"></div>

            <!-- Main Content Area -->
            <main class="flex-1 min-w-0 overflow-x-hidden order-2 xl:order-1 xl:mx-20 lg:mx-16 md:mx-8 sm:mx-4">
                <div class="flex flex-col xl:flex-row w-full relative">
                
                    <!-- Content -->
                    <div class="flex-1 w-full py-4 px-4 sm:py-8 sm:px-6 lg:px-8 xl:px-8 max-w-4xl mx-auto">
                        {% if $e.isKey('')  %}
                            {% include 'template/hero.html.twig' %}
                        {% endif %}
                        
                        <!-- Breadcrumb -->
                        <nav class="flex items-center justify-between mb-6 text-sm overflow-x-auto">
                            <ol class="flex items-center space-x-2 flex-nowrap">
                                <li class="whitespace-nowrap"><a href="/" class="text-blue-600 dark:text-secondary-400 hover:underline">{{ $t('Home') }}</a></li>
                                <li class="whitespace-nowrap"><i class="ph-duotone {{ language.isRtl ? 'ph-caret-left' : 'ph-caret-right' }} text-base text-gray-400"></i></li>
                                <li class="text-gray-600 dark:text-gray-400 whitespace-nowrap">{{ title }}</li>
                            </ol>
                            <a href="{{ github }}/edit/master/doc/{{ filename }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap ms-4">
                                <i class="ph-duotone ph-pencil-simple"></i>
                                <span class="text-xs hidden sm:inline">{{ $t('Edit') }}</span>
                            </a>
                        </nav>

                        <!-- Mobile TOC -->
                        <div class="xl:hidden mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">{{ $t('On This Page') }}</h3>
                            <nav>
                                <ul class="flex flex-wrap gap-2">
                                    {% for section in index %}
                                        <li><a href="#{{ section.id }}" class="inline-block px-3 py-1 text-xs rounded-lg bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 border border-gray-200 dark:border-gray-600">{{ section.title | html }}</a></li>
                                    {% endfor %}
                                </ul>
                            </nav>
                        </div>

                        <!-- Document Content -->
                        <article class="prose prose-sm sm:prose-base lg:prose-lg dark:prose-invert max-w-none overflow-x-auto">
                            {{ content }}
                        </article>

                        <!-- Navigation Buttons -->
                        <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4 mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
                            {% if previous is defined %}
                                <a href="/{{ previous.key }}" class="flex-1 flex items-center gap-2 px-4 py-2 rounded-lg border bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <i class="ph-duotone {{ language.isRtl ? 'ph-arrow-right' : 'ph-arrow-left' }} text-xl text-purple-600 dark:text-purple-400"></i>
                                    <div class="text-start min-w-0">
                                        <div class="text-xs text-gray-500">{{ $t('Previous') }}</div>
                                        <div class="font-semibold truncate">{{ previous.title }}</div>
                                        <div class="text-xs opacity-80">{{  $l.maxLength(previous.description, 50) }}</div>
                                    </div>
                                </a>
                            {% else %}
                                <div class="flex-1"></div>
                            {% endif %}
                            {% if next is defined %}
                                <a href="/{{ next.key }}" class="flex-1 flex items-center gap-2 justify-end px-4 py-2 rounded-lg border bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <div class="text-end min-w-0">
                                        <div class="text-xs opacity-80">{{ $t('Next') }}</div>
                                        <div class="font-semibold truncate">
                                            {{ next.title }}
                                        </div>
                                        <div class="text-xs opacity-80">{{  $l.maxLength(next.description, 50) }}</div>
                                    </div>
                                    <i class="ph-duotone {{ language.isRtl ? 'ph-arrow-left' : 'ph-arrow-right' }} text-xl text-purple-600 dark:text-purple-400"></i>
                                </a>
                            {% else %}
                                <div class="flex-1"></div>
                            {% endif %}
                        </div>

                        {% include 'template/footer.html.twig' %}
                    </div>
                </div>
            </main>

            <!-- Right Sidebar - Table of Contents -->
            <aside class="sticky top-0 xl:top-16 xl:h-[calc(100vh-4rem)] xl:w-64 w-full overflow-y-auto px-4 py-6 xl:py-8 border-b xl:border-b-0 xl:border-s border-gray-200 dark:border-gray-700 order-1 xl:order-2 bg-white dark:bg-gray-900 hidden xl:block">
                <div class="xl:sticky xl:top-0">
                    <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4">{{ $t('On This Page') }}</h3>
                    <nav id="tableOfContents">
                        <ul class="space-y-2">
                            {% for section in index %}
                                <li class="block"><a href="#{{ section.id }}" class="block px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 border-s-2 border-transparent hover:border-blue-600 ps-3 md-level-{{ section.level }}">{{ section.title | html }}</a></li>
                            {% endfor %}
                        </ul>
                    </nav>
                    
                    <!-- Action Buttons -->
                    <div class="mt-6 space-y-1 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <a href="{{ github }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-github-logo text-lg"></i>
                            <span class="text-xs">{{ $t('Star on GitHub') }}</span>
                        </a>
                        <a href="{{ github }}/issues" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-warning-circle text-lg"></i>
                            <span class="text-xs">{{ $t('Create Issues') }}</span>
                        </a>
                        <a href="{{ github }}/edit/master/doc/{{ filename }}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
                            <i class="ph-duotone ph-pencil-simple text-lg"></i>
                            <span class="text-xs">{{ $t('Edit this page') }}</span>
                        </a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    {% include 'template/scripts.html.twig' %}
</body>
</html>